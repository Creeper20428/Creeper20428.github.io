function arrayCopy(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c];return b}function isFactor(a,b){return 0==a%b}function quadraticEquation(a,b,c){var e=(-b+Math.sqrt(b*b-4*a*c))/(2*a);a=(-b-Math.sqrt(b*b-4*a*c))/(2*a);return[e,a]}function findFactors(a){for(var b=[],c=0,e=1;e<=a;e++)c=a/e,c===Math.floor(c)&&b.push(e);return b}function reorganize(a){for(var b=[],c=0;c<a.length;c++){var e=a.length-1-c;if(c>e)break;b.push([a[c],a[e]])}return b}function GCF(a,b){if(0==a)return b;for(;0!=b;)a>b?a-=b:b-=a;return a}function GCL(a,b){var c="";if(void 0==a||void 0==b)throw"Internal Error: a or b does not exist!!!";if(a.length<b.length)for(var e=0;e<b.length-1;e++)for(var g=0;g<a.length;g++)b[e]==a[g]&&void 0!=b[g]&&void 0!=a[e]&&(c+=b[e]);else for(e=0;e<a.length;e++)for(g=0;g<b.length;g++)a[e]==b[g]&&void 0!=b[e]&&void 0!=a[g]&&(c+=b[e]);return c}function AlgebraicExpression(a){this.constants=null;this.variables=[];var b="";a=a.split("");var c=0;do console.log(a[c]),b+=a[c],c++;while(__utils.isDigit(a[c]));for(;c<a.length;c++)this.variables.push(a[c]);this.constants=parseInt(b,10)}AlgebraicExpression.prototype.toString=function(){return this.constants+this.variables.join("")};var __utils={isDigit:function(a){return!isNaN(parseInt(a),10)},isCharacter:function(a){return!isNaN(parseInt(a),10)}};function factor(a,b,c){var e,g,h;e=a?a:1;g=b?b:0;h=c?c:0;if(!b&&!c)throw"Factoring error: b and c must not be 0.";if(0==a)throw"Quadratic Equation Error: a cannot be 0!";var f=null;a=reorganize(findFactors(a*c));for(c=0;c<a.length;c++)if(console.log(a[c][0],a[c][1]),a[c][0]+a[c][1]==b){console.log("here");f=arrayCopy(a[c]);console.log(f);break}if(null==f)return console.log("Not factorable."),quadraticEquation(e,g,h);b=[];a="";console.log(f,e);if(1==e)console.log(f),console.log(pretty_print(f,"simple")),console.log(solve(f,"simple")),a=pretty_print(f,"simple"),b=solve(f,"simple");else{var d=[0,0,0,[0,0],0,[0,0]],d={top:[0,0],side:[0,0],rectangle:[0,0,0,0]};d.rectangle[0]=new AlgebraicExpression(e+"xx");d.rectangle[1]=new AlgebraicExpression(f[0]+"x");d.rectangle[2]=new AlgebraicExpression(f[1]+"x");d.rectangle[3]=new AlgebraicExpression(h.toString());d.top[0]=GCF(d.rectangle[0].constants,d.rectangle[2].constants)+GCL(d.rectangle[0].variables.join(""),d.rectangle[2].variables.join(""));d.top[1]=GCF(d.rectangle[1].constants,d.rectangle[3].constants)+GCL(d.rectangle[1].variables.join(""),d.rectangle[3].variables.join(""));d.side[0]=GCF(d.rectangle[0].constants,d.rectangle[1].constants)+GCL(d.rectangle[0].variables.join(""),d.rectangle[1].variables.join(""));d.side[1]=GCF(d.rectangle[2].constants,d.rectangle[3].constants)+GCL(d.rectangle[2].variables.join(""),d.rectangle[3].variables.join(""));console.log([d.top,d.side]);console.log(pretty_print([d.top,d.side],"complex"));console.log(solve([d.top,d.side],"complex"));b=solve([d.top,d.side],"complex");a=pretty_print([d.top,d.side],"complex")}showwork(e,g,h,f,a,b,d)}function pretty_print(a,b){if("simple"==b)return"(x + "+a[0]+")(x + "+a[1]+") = 0";if("complex"==b)return"("+a[0][0]+" + "+a[0][1]+")("+a[1][0]+" + "+a[1][1]+") = 0"}function solve(a,b){if("simple"==b)return[-a[0],-a[1]];if("complex"==b){var c=(new AlgebraicExpression(a[0][0])).constants,e=(new AlgebraicExpression(a[0][1])).constants,g=(new AlgebraicExpression(a[1][0])).constants,h=(new AlgebraicExpression(a[1][1])).constants;return[-(e/c),-(h/g)]}}function showwork(a,b,c,e,g,h,f){c=document.getElementById("work")?document.getElementById("work"):document.createElement("pre");if("PRE"!==c.nodeType){var d=document.createElement("pre");c.appendChild(d)}else d=c;d.style.fontFamily="monospace";work="Diamond problem:\n";work+="TOP:    "+a+"x{SQUARED}\n";work+="LEFT:   "+e[0]+"\n";work+="RIGHT:  "+e[1]+"\n";work+="BOTTOM: "+b+"x\n";work+="\n";work+="FACTORED EQUATION:";work+=g+"\n";work+="\n";f&&(work+="GENERIC RECTANGLE:\n",work+="TOP/BORROM FACTORS: "+f.top.join(";")+"\n",work+="SIDE/SIDE FACTORS: "+f.side.join(";")+"\n",work+="RECTANGLE\n",console.log(f.rectangle),work+="ROW 1: "+f.rectangle[0]+" , "+f.rectangle[2]+"\n",work+="ROW 2: "+f.rectangle[1]+" , "+f.rectangle[3]+"\n");work+="ROOTS: "+h.join(";");d.innerHTML=work;c.appendChild(d);document.body.appendChild(d)};
